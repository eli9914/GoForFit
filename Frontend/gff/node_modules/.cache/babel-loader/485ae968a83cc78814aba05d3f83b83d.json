{"ast":null,"code":"var _jsxFileName = \"/Users/tomerbenshimol/Documents/GitHub/PM2022_TEAM_23/Frontend/gff/src/components/forms/CoachForumPost.js\";\nimport React from \"react\";\nimport './Form.css';\nimport axios from \"axios\";\nimport UserContext from \"../../UserContext\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CoachForumPost extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Coaches: [],\n      coachUserName: '',\n      content: '',\n      to: '',\n      sent: false\n    };\n  }\n\n  FetchCoaches() {\n    const {\n      user,\n      isAuthenticated,\n      LogIn,\n      LogOut\n    } = this.context;\n    axios.get(\"http://localhost:8080/coach/getCoach\").then(res => {\n      res.data.map(coach => user.type === \"Sportsman\" && coach.sportKind === user.sport ? this.setState({\n        Coaches: res.data,\n        coachUserName: coach.userName,\n        to: coach.userName + \" Forum\"\n      }) : this.setState({\n        Coaches: res.data\n      }));\n    });\n  }\n\n  componentDidMount() {\n    this.FetchCoaches();\n  }\n\n  async submit(event, content, to) {\n    event.preventDefault();\n    const {\n      user,\n      isAuthenticated,\n      LogIn,\n      LogOut\n    } = this.context;\n\n    if (this.state.content != '' && user.type === \"Sportsman\") {\n      await axios.post(\"http://localhost:8080/messages/saveMessage\", {\n        from: user.userName,\n        content: this.state.content,\n        to: this.state.to\n      }).then(this.setState({\n        content: '',\n        sent: true\n      }));\n    }\n\n    if (this.state.content != '' && user.type === \"Coach\") {\n      await axios.post(\"http://localhost:8080/messages/saveMessage\", {\n        from: user.userName,\n        content: this.state.content,\n        to: user.userName + \" Forum\"\n      }).then(this.setState({\n        content: '',\n        sent: true\n      }));\n    }\n  }\n\n  render() {\n    const {\n      user,\n      isAuthenticated,\n      LogIn,\n      LogOut\n    } = this.context;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-form-content\",\n      children: [this.state.sent && /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"../coach/profile\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 38\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"messageForm\",\n        onSubmit: e => this.submit(e, this.state.content, this.state.to),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"New Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"content\",\n            className: \"form-label\",\n            children: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: this.state.content,\n            onChange: e => this.setState({\n              content: e.target.value\n            }),\n            type: \"text\",\n            id: \"content\",\n            name: \"content\",\n            className: \"form-input-content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"form-input-btn\",\n          type: \"submit\",\n          children: \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nCoachForumPost.contextType = UserContext;\nexport default CoachForumPost;","map":{"version":3,"sources":["/Users/tomerbenshimol/Documents/GitHub/PM2022_TEAM_23/Frontend/gff/src/components/forms/CoachForumPost.js"],"names":["React","axios","UserContext","Navigate","CoachForumPost","Component","constructor","props","state","Coaches","coachUserName","content","to","sent","FetchCoaches","user","isAuthenticated","LogIn","LogOut","context","get","then","res","data","map","coach","type","sportKind","sport","setState","userName","componentDidMount","submit","event","preventDefault","post","from","render","e","target","value","contextType"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport './Form.css';\nimport axios from \"axios\";\nimport UserContext from \"../../UserContext\";\nimport { Navigate } from \"react-router-dom\";\n\n\nclass CoachForumPost extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = \n        {\n            Coaches: [],\n            coachUserName:'',\n            content: '',\n            to: '',\n            sent: false\n        }\n    }\n\n    FetchCoaches() {\n        const {user, isAuthenticated, LogIn, LogOut} = this.context;\n        axios.get(\"http://localhost:8080/coach/getCoach\")\n        .then((res) => {\n            res.data.map(coach => (\n                user.type===\"Sportsman\" && coach.sportKind===user.sport?this.setState({\n                    Coaches:res.data,\n                    coachUserName:coach.userName,\n                    to:coach.userName + \" Forum\"\n                }):this.setState({\n                    Coaches:res.data,\n                })\n            ))\n        });\n    }\n\n    componentDidMount(){\n        this.FetchCoaches();\n    }\n\n    async submit(event,content,to) {\n        event.preventDefault();\n        const {user, isAuthenticated, LogIn, LogOut} = this.context;\n        if(this.state.content!='' && user.type===\"Sportsman\"){\n            await axios.post(\"http://localhost:8080/messages/saveMessage\",{\n                from:user.userName,\n                content:this.state.content,\n                to:this.state.to\n            })\n            .then(\n                this.setState({\n                    content:'',\n                    sent:true\n            })\n            );   \n        }\n        if(this.state.content!='' && user.type===\"Coach\"){\n            await axios.post(\"http://localhost:8080/messages/saveMessage\",{\n                from:user.userName,\n                content:this.state.content,\n                to:user.userName + \" Forum\"\n            })\n            .then(\n                this.setState({\n                    content:'',\n                    sent:true\n            })\n            );   \n        }\n    }\n\n    render(){\n        const {user, isAuthenticated, LogIn, LogOut} = this.context;\n        return (\n            <div className='messages-form-content'>\n                {this.state.sent && (<Navigate to=\"../coach/profile\" replace={true} />)}\n            <form className=\"messageForm\" onSubmit={(e)=>this.submit(e,this.state.content,this.state.to)}>\n                 <h1>\n                   New Post\n                </h1>\n                <div className=\"form-inputs\">\n                    <label htmlFor=\"content\" \n                    className=\"form-label\">\n                        Content\n                    </label>\n                    <input\n                    value={this.state.content} onChange={(e)=>this.setState({content:e.target.value})} type=\"text\"\n                        id='content'\n                         name='content'\n                         className='form-input-content'\n                    />\n                </div>\n                <button className=\"form-input-btn\"\n                    type='submit'>\n                    Post\n                </button>\n            </form>\n            </div>\n        );\n    }\n}\n\nCoachForumPost.contextType=UserContext;\n\nexport default CoachForumPost;"]},"metadata":{},"sourceType":"module"}