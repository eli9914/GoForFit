{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\eli99\\\\OneDrive\\\\\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD\\\\GitHub\\\\PM2022_TEAM_23\\\\Frontend\\\\gff\\\\src\\\\components\\\\forms\\\\MessageForm.js\";\nimport React from \"react\";\nimport './Form.css';\nimport axios from \"axios\";\nimport UserContext from \"../../UserContext\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MessageForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      admins: [],\n      coaches: [],\n      sportsmans: [],\n      users: [],\n      content: '',\n      to: '',\n      sent: false\n    };\n  }\n\n  async fetchAdmins() {\n    await axios.get(\"http://localhost:8080/admin/getAdmin\").then(res => {\n      this.setState({\n        admins: res.data,\n        users: this.state.users.concat(res.data),\n        to: res.data[0].userName\n      });\n    });\n  }\n\n  async fetchCoaches() {\n    await axios.get(\"http://localhost:8080/coach/getCoach\").then(res => {\n      this.setState({\n        coaches: res.data,\n        users: this.state.users.concat(res.data)\n      });\n    });\n  }\n\n  async fetchSportsmans() {\n    await axios.get(\"http://localhost:8080/sportsman/getSportsman\").then(res => {\n      this.setState({\n        sportsmans: res.data,\n        users: this.state.users.concat(res.data)\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchAdmins();\n    this.fetchCoaches();\n    this.fetchSportsmans();\n  }\n\n  async submit(event, content, to) {\n    event.preventDefault();\n    const {\n      user,\n      isAuthenticated,\n      LogIn,\n      LogOut\n    } = this.context;\n\n    if (this.state.content != '') {\n      await axios.post(\"http://localhost:8080/messages/saveMessage\", {\n        from: user.userName,\n        content: this.state.content,\n        to: this.state.to\n      }).then(this.setState({\n        content: '',\n        to: '',\n        sent: true\n      }));\n    }\n  }\n\n  render() {\n    const {\n      user,\n      isAuthenticated,\n      LogIn,\n      LogOut\n    } = this.context;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-form-content\",\n      children: [this.state.sent && /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"../messages\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 38\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"messageForm\",\n        onSubmit: e => this.submit(e, this.state.content, this.state.to),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"New Message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"to\",\n            className: \"form-label\",\n            children: \"To\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: this.state.to,\n            onChange: e => this.setState({\n              to: e.target.value\n            }),\n            type: \"text\",\n            id: \"to\",\n            name: \"to\",\n            className: \"form-input\",\n            children: this.state.users.map(_user => _user.userName != user.userName && /*#__PURE__*/_jsxDEV(\"option\", {\n              value: _user.userName,\n              children: _user.userName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"content\",\n            className: \"form-label\",\n            children: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: this.state.content,\n            onChange: e => this.setState({\n              content: e.target.value\n            }),\n            type: \"text\",\n            id: \"content\",\n            name: \"content\",\n            className: \"form-input-content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"form-input-btn\",\n          type: \"submit\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nMessageForm.contextType = UserContext;\nexport default MessageForm;","map":{"version":3,"sources":["C:/Users/eli99/OneDrive/מסמכים/GitHub/PM2022_TEAM_23/Frontend/gff/src/components/forms/MessageForm.js"],"names":["React","axios","UserContext","Navigate","MessageForm","Component","constructor","props","state","admins","coaches","sportsmans","users","content","to","sent","fetchAdmins","get","then","res","setState","data","concat","userName","fetchCoaches","fetchSportsmans","componentDidMount","submit","event","preventDefault","user","isAuthenticated","LogIn","LogOut","context","post","from","render","e","target","value","map","_user","contextType"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,SAASC,QAAT,QAAyB,kBAAzB;;;AAGA,MAAMC,WAAN,SAA0BJ,KAAK,CAACK,SAAhC,CAA0C;AAEtCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GACA;AACIC,MAAAA,MAAM,EAAC,EADX;AAEIC,MAAAA,OAAO,EAAC,EAFZ;AAGIC,MAAAA,UAAU,EAAC,EAHf;AAIIC,MAAAA,KAAK,EAAC,EAJV;AAKIC,MAAAA,OAAO,EAAE,EALb;AAMIC,MAAAA,EAAE,EAAE,EANR;AAOIC,MAAAA,IAAI,EAAE;AAPV,KADA;AAUH;;AAGY,QAAXC,WAAW,GACjB;AACI,UAAMf,KAAK,CAACgB,GAAN,CAAU,sCAAV,EACLC,IADK,CACCC,GAAD,IAAS;AACX,WAAKC,QAAL,CAAc;AAACX,QAAAA,MAAM,EAACU,GAAG,CAACE,IAAZ;AAAiBT,QAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,KAAX,CAAiBU,MAAjB,CAAwBH,GAAG,CAACE,IAA5B,CAAxB;AAA0DP,QAAAA,EAAE,EAACK,GAAG,CAACE,IAAJ,CAAS,CAAT,EAAYE;AAAzE,OAAd;AAEH,KAJK,CAAN;AAKH;;AAEiB,QAAZC,YAAY,GAClB;AACI,UAAMvB,KAAK,CAACgB,GAAN,CAAU,sCAAV,EACLC,IADK,CACCC,GAAD,IAAS;AACX,WAAKC,QAAL,CAAc;AAACV,QAAAA,OAAO,EAACS,GAAG,CAACE,IAAb;AAAkBT,QAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,KAAX,CAAiBU,MAAjB,CAAwBH,GAAG,CAACE,IAA5B;AAAzB,OAAd;AACH,KAHK,CAAN;AAIH;;AAEoB,QAAfI,eAAe,GACrB;AACI,UAAMxB,KAAK,CAACgB,GAAN,CAAU,8CAAV,EACLC,IADK,CACCC,GAAD,IAAS;AACX,WAAKC,QAAL,CAAc;AAACT,QAAAA,UAAU,EAACQ,GAAG,CAACE,IAAhB;AAAqBT,QAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,KAAX,CAAiBU,MAAjB,CAAwBH,GAAG,CAACE,IAA5B;AAA5B,OAAd;AACH,KAHK,CAAN;AAIH;;AAEDK,EAAAA,iBAAiB,GACjB;AACI,SAAKV,WAAL;AACA,SAAKQ,YAAL;AACA,SAAKC,eAAL;AACH;;AAEW,QAANE,MAAM,CAACC,KAAD,EAAOf,OAAP,EAAeC,EAAf,EAAmB;AAC3Bc,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM;AAACC,MAAAA,IAAD;AAAOC,MAAAA,eAAP;AAAwBC,MAAAA,KAAxB;AAA+BC,MAAAA;AAA/B,QAAyC,KAAKC,OAApD;;AACA,QAAG,KAAK1B,KAAL,CAAWK,OAAX,IAAoB,EAAvB,EAA0B;AACtB,YAAMZ,KAAK,CAACkC,IAAN,CAAW,4CAAX,EAAwD;AAC1DC,QAAAA,IAAI,EAACN,IAAI,CAACP,QADgD;AAE1DV,QAAAA,OAAO,EAAC,KAAKL,KAAL,CAAWK,OAFuC;AAG1DC,QAAAA,EAAE,EAAC,KAAKN,KAAL,CAAWM;AAH4C,OAAxD,EAKLI,IALK,CAMF,KAAKE,QAAL,CAAc;AACVP,QAAAA,OAAO,EAAC,EADE;AAEVC,QAAAA,EAAE,EAAC,EAFO;AAGVC,QAAAA,IAAI,EAAC;AAHK,OAAd,CANE,CAAN;AAYP;AAAC;;AAEEsB,EAAAA,MAAM,GAAE;AACJ,UAAM;AAACP,MAAAA,IAAD;AAAOC,MAAAA,eAAP;AAAwBC,MAAAA,KAAxB;AAA+BC,MAAAA;AAA/B,QAAyC,KAAKC,OAApD;AACA,wBACI;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA,iBACK,KAAK1B,KAAL,CAAWO,IAAX,iBAAoB,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC,aAAb;AAA2B,QAAA,OAAO,EAAE;AAApC;AAAA;AAAA;AAAA;AAAA,cADzB,eAEA;AAAM,QAAA,SAAS,EAAC,aAAhB;AAA8B,QAAA,QAAQ,EAAGuB,CAAD,IAAK,KAAKX,MAAL,CAAYW,CAAZ,EAAc,KAAK9B,KAAL,CAAWK,OAAzB,EAAiC,KAAKL,KAAL,CAAWM,EAA5C,CAA7C;AAAA,gCACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADL,eAII;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,kCACI;AAAO,YAAA,OAAO,EAAC,IAAf;AACA,YAAA,SAAS,EAAC,YADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI;AACI,YAAA,KAAK,EAAE,KAAKN,KAAL,CAAWM,EADtB;AAC0B,YAAA,QAAQ,EAAGwB,CAAD,IAAK,KAAKlB,QAAL,CAAc;AAACN,cAAAA,EAAE,EAACwB,CAAC,CAACC,MAAF,CAASC;AAAb,aAAd,CADzC;AAC6E,YAAA,IAAI,EAAC,MADlF;AAEI,YAAA,EAAE,EAAC,IAFP;AAGI,YAAA,IAAI,EAAC,IAHT;AAII,YAAA,SAAS,EAAC,YAJd;AAAA,sBAMQ,KAAKhC,KAAL,CAAWI,KAAX,CAAiB6B,GAAjB,CAAsBC,KAAK,IAAKA,KAAK,CAACnB,QAAN,IAAkBO,IAAI,CAACP,QAAvB,iBAC5B;AAAQ,cAAA,KAAK,EAAEmB,KAAK,CAACnB,QAArB;AAAA,wBAAgCmB,KAAK,CAACnB;AAAtC;AAAA;AAAA;AAAA;AAAA,oBADJ;AANR;AAAA;AAAA;AAAA;AAAA,kBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAqBI;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,kCACI;AAAO,YAAA,OAAO,EAAC,SAAf;AACA,YAAA,SAAS,EAAC,YADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI;AACA,YAAA,KAAK,EAAE,KAAKf,KAAL,CAAWK,OADlB;AAC2B,YAAA,QAAQ,EAAGyB,CAAD,IAAK,KAAKlB,QAAL,CAAc;AAACP,cAAAA,OAAO,EAACyB,CAAC,CAACC,MAAF,CAASC;AAAlB,aAAd,CAD1C;AACmF,YAAA,IAAI,EAAC,MADxF;AAEI,YAAA,EAAE,EAAC,SAFP;AAGK,YAAA,IAAI,EAAC,SAHV;AAIK,YAAA,SAAS,EAAC;AAJf;AAAA;AAAA;AAAA;AAAA,kBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBJ,eAiCI;AAAQ,UAAA,SAAS,EAAC,gBAAlB;AACI,UAAA,IAAI,EAAC,QADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjCJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AA2CH;;AAhHqC;;AAmH1CpC,WAAW,CAACuC,WAAZ,GAAwBzC,WAAxB;AAEA,eAAeE,WAAf","sourcesContent":["import React from \"react\";\nimport './Form.css';\nimport axios from \"axios\";\nimport UserContext from \"../../UserContext\";\nimport { Navigate } from \"react-router-dom\";\n\n\nclass MessageForm extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = \n        {\n            admins:[],\n            coaches:[],\n            sportsmans:[],\n            users:[],\n            content: '',\n            to: '',\n            sent: false\n        }\n    }\n\n    \nasync fetchAdmins()\n{\n    await axios.get(\"http://localhost:8080/admin/getAdmin\")\n    .then((res) => {\n        this.setState({admins:res.data,users: this.state.users.concat(res.data),to:res.data[0].userName\n        })\n    })\n}\n\nasync fetchCoaches()\n{\n    await axios.get(\"http://localhost:8080/coach/getCoach\")\n    .then((res) => {\n        this.setState({coaches:res.data,users: this.state.users.concat(res.data)})\n    })\n}\n\nasync fetchSportsmans()\n{\n    await axios.get(\"http://localhost:8080/sportsman/getSportsman\")\n    .then((res) => {\n        this.setState({sportsmans:res.data,users: this.state.users.concat(res.data)})\n    })\n}\n\ncomponentDidMount()\n{\n    this.fetchAdmins();\n    this.fetchCoaches();\n    this.fetchSportsmans();\n}\n\nasync submit(event,content,to) {\n    event.preventDefault();\n    const {user, isAuthenticated, LogIn, LogOut} = this.context;\n    if(this.state.content!=''){\n        await axios.post(\"http://localhost:8080/messages/saveMessage\",{\n            from:user.userName,\n            content:this.state.content,\n            to:this.state.to\n        })\n        .then(\n            this.setState({\n                content:'',\n                to:'',\n                sent:true\n        })\n        );   \n}}\n\n    render(){\n        const {user, isAuthenticated, LogIn, LogOut} = this.context;\n        return (\n            <div className='messages-form-content'>\n                {this.state.sent && (<Navigate to=\"../messages\" replace={true} />)}\n            <form className=\"messageForm\" onSubmit={(e)=>this.submit(e,this.state.content,this.state.to)}>\n                 <h1>\n                   New Message\n                </h1>\n                <div className=\"form-inputs\">\n                    <label htmlFor=\"to\" \n                    className=\"form-label\">\n                        To\n                    </label>\n                    <select\n                        value={this.state.to} onChange={(e)=>this.setState({to:e.target.value})} type=\"text\"\n                        id='to'\n                        name='to'\n                        className='form-input'>\n                        {\n                            this.state.users.map( _user => (_user.userName != user.userName &&\n                                <option value={_user.userName}>{_user.userName}</option>\n                            ))\n                        }\n                    </select>\n                </div>\n                <div className=\"form-inputs\">\n                    <label htmlFor=\"content\" \n                    className=\"form-label\">\n                        Content\n                    </label>\n                    <input\n                    value={this.state.content} onChange={(e)=>this.setState({content:e.target.value})} type=\"text\"\n                        id='content'\n                         name='content'\n                         className='form-input-content'\n                    />\n                </div>\n                <button className=\"form-input-btn\"\n                    type='submit'>\n                    Send\n                </button>\n            </form>\n            </div>\n        );\n    }\n}\n\nMessageForm.contextType=UserContext;\n\nexport default MessageForm;"]},"metadata":{},"sourceType":"module"}